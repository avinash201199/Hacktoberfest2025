:root{
  --bg: #0f1720;
  --card: #0b1220;
  --muted: #93a3b5;
  --accent: #7dd3fc;
  --accent-2: #60a5fa;
  --glass: rgba(255,255,255,0.03);
  --radius: 12px;
  --max-width: 980px;
  --hf-left:#ff6a00; /* orange */
  --hf-right:#8b5cf6; /* purple */
  --bg-dark: #071126;
}

/* Light theme variables */
[data-theme="light"] {
  --bg: #f5f7fa;
  --card: #ffffff;
  --muted: #64748b;
  --accent: #0284c7;
  --accent-2: #0369a1;
  --glass: rgba(0,0,0,0.02);
  --bg-dark: #e2e8f0;
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --border-color: rgba(0,0,0,0.08);
  --shadow-color: rgba(0,0,0,0.1);
}

/* Dark theme explicit variables */
[data-theme="dark"] {
  --text-primary: #e6eef6;
  --text-secondary: #93a3b5;
  --border-color: rgba(255,255,255,0.03);
  --shadow-color: rgba(2,6,23,0.6);
}

*{box-sizing:border-box}
html,body,#content{height:100%;}
body{
  margin:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: var(--bg);
  color: var(--text-primary, #e6eef6);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background 0.3s ease, color 0.3s ease;
}

/* Light theme body background gradient */
[data-theme="light"] body {
  background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
}

.site{display:flex;min-height:100vh}

/* Top navigation */
/* --- Original & Base Styles --- */
.topnav {
    background: linear-gradient(90deg, var(--hf-left), var(--hf-right));
    color: #fff;
    padding: 12px 20px;
    position: sticky;
    top: 0;
    z-index: 60;
    box-shadow: 0 6px 24px rgba(11,17,40,0.5);
}
.topnav-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.topnav .brand {
    color: #fff;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.05rem;
    display: flex;
    align-items: center;
    gap: 10px;
}
.nav-links {
    display: flex;
    gap: 18px;
}
.nav-links a {
    color: rgba(255, 255, 255, 0.95);
    text-decoration: none;
    padding: 8px 10px;
    border-radius: 8px;
    transition: background .18s ease;
}
.nav-links a:hover {
    background: rgba(255, 255, 255, 0.06);
}
.nav-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}
.nav-btn {
    background: transparent;
    border: 0;
    color: #fff;
    font-size: 2.05rem;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
}
.nav-cta {
    background: #021025;
    color: #fff;
    padding: 8px 12px;
    border-radius: 10px;
    text-decoration: none;
}

/* Theme toggle button */
#theme-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
    font-size: 1.3rem;
    cursor: pointer;
    padding: 6px 10px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    width: 40px;
    height: 40px;
}

#theme-toggle:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.05);
}

[data-theme="light"] #theme-toggle {
    background: rgba(0, 0, 0, 0.05);
    border-color: rgba(0, 0, 0, 0.1);
}

[data-theme="light"] #theme-toggle:hover {
    background: rgba(0, 0, 0, 0.1);
}


#hamburger {
    display: none;
}

@media (max-width: 768px) {
    .nav-links {
        display: none;
    }
    
    #hamburger {
        display: block;
    }
}

@media (max-width: 480px) {
    #nav-search-btn {
        display: none;
    }
}
/* Sidebar */
.sidebar{
  width:300px;
  background: var(--card);
  border-right:1px solid var(--border-color);
  padding:20px; display:flex; flex-direction:column; gap:16px;
  transition: width .35s cubic-bezier(.2,.9,.2,1), transform .35s ease, background 0.3s ease;
  position:sticky; top:0; height:100vh; overflow:auto;
}

[data-theme="light"] .sidebar {
  background: linear-gradient(180deg, #ffffff, #f8fafc);
  box-shadow: 2px 0 8px rgba(0,0,0,0.05);
}
.sidebar.collapsed{width:70px}
.brand a{font-weight:700; font-size:18px; color:var(--accent); text-decoration:none}

.search-wrapper{position:relative}
.search-wrapper input{
  width:100%; padding:10px 36px 10px 12px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid var(--border-color);
  color:var(--muted); border-radius:8px; outline:none;
  transition:box-shadow .2s ease, transform .12s ease, background 0.3s ease, border-color 0.3s ease;
}
.search-wrapper input:focus{box-shadow:0 6px 20px rgba(96,165,250,0.12); transform:translateY(-1px);}

[data-theme="light"] .search-wrapper input {
  background: #ffffff;
  border-color: rgba(0,0,0,0.1);
  color: #475569;
}

[data-theme="light"] .search-wrapper input:focus {
  box-shadow: 0 6px 20px rgba(2,132,199,0.15);
  border-color: var(--accent);
}
.search-ico{position:absolute; right:10px; top:8px; width:20px; height:20px; fill:var(--muted); opacity:.7}

.toc{flex:1; overflow:auto}
.toc-list{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px}
.toc-item a{display:block; padding:8px 10px; color:rgba(255,255,255,0.85); text-decoration:none; border-radius:8px; transition:background .15s ease, color .15s ease, transform .18s cubic-bezier(.2,.9,.2,1)}
.toc-item a:hover{background:rgba(125,211,252,0.06); color:var(--accent); transform:translateX(4px)}

[data-theme="light"] .toc-item a {
  color: var(--text-secondary);
}

[data-theme="light"] .toc-item a:hover {
  background: rgba(2,132,199,0.08);
  color: var(--accent);
}
.toc-item.toc-h1 a{font-weight:700}
.toc-item.toc-h2 a{padding-left:14px}
.toc-item.toc-h3 a{padding-left:26px; font-size:.95em}
.toc-item.dim a{opacity:.45; transform:none}
.toc-item a.active{background:linear-gradient(90deg,var(--hf-left),var(--hf-right)); color:#021025; font-weight:700; transform:translateX(2px) scale(1.01)}
.toc-empty{color:var(--muted); font-style:italic}

.toc-toggle{border:0; background:transparent; color:var(--muted); padding:8px; cursor:pointer}
.sidebar-footer{display:flex; gap:8px; align-items:center}
.sidebar-footer .btn{display:inline-block; padding:8px 12px; background:rgba(255,255,255,0.03); color:var(--accent-2); border-radius:8px; text-decoration:none}

/* Content */
.content{flex:1; padding:36px 48px; display:flex; justify-content:center}
.content-inner{width:100%; max-width:var(--max-width); background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); padding:36px; border-radius:16px; box-shadow:0 10px 40px var(--shadow-color); transition:box-shadow .36s ease, transform .36s ease, background 0.3s ease;}
.content-inner:hover{box-shadow:0 18px 60px var(--shadow-color); transform:translateY(-2px)}

[data-theme="light"] .content-inner {
  background: linear-gradient(180deg, #ffffff, rgba(248,250,252,0.5));
  box-shadow: 0 10px 40px rgba(0,0,0,0.08);
}

[data-theme="light"] .content-inner:hover {
  box-shadow: 0 18px 60px rgba(0,0,0,0.12);
}

/* Decorative background gradient blob */
.bg-decor{position:absolute; left:50%; top:4%; width:720px; height:420px; transform:translateX(-50%); background:radial-gradient(circle at 20% 30%, rgba(125,211,252,0.06), transparent 25%), radial-gradient(circle at 80% 70%, rgba(96,165,250,0.05), transparent 30%); filter:blur(20px); pointer-events:none; z-index:0}
.content-inner{position:relative; z-index:2}

@media (max-width:900px){.bg-decor{display:none}}

/* Animations */
.fade-in{animation:fadeIn .6s ease both}
@keyframes fadeIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none}}
@keyframes slideInLeft{from{opacity:0; transform:translateX(-8px)} to{opacity:1; transform:none}}
.toc-item{animation:slideInLeft .36s ease both}

/* Article styles */
#article h1{font-size:28px; margin-top:0}
#article h2{margin-top:28px}
#article p{color:var(--muted); line-height:1.7}
#article table{width:100%; border-collapse:collapse}
#article table th, #article table td{border:1px solid var(--border-color); padding:8px; color:var(--muted)}
#article a{color:var(--accent); text-decoration:none}

[data-theme="light"] #article h1,
[data-theme="light"] #article h2,
[data-theme="light"] #article h3 {
  color: var(--text-primary);
}

[data-theme="light"] #article p {
  color: var(--text-secondary);
}

[data-theme="light"] #article table th,
[data-theme="light"] #article table td {
  color: var(--text-secondary);
  background: rgba(0,0,0,0.01);
}

/* Code blocks */
pre{border-radius:12px; overflow:auto; padding:16px; background:#010617; box-shadow:inset 0 1px 0 rgba(255,255,255,0.02); transition: background 0.3s ease;}
code{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace; font-size:0.95em}

[data-theme="light"] pre {
  background: #f1f5f9;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.05);
}

/* Heading anchors */
.heading-anchor{margin-left:8px; opacity:0; transform:translateY(-2px); transition:opacity .12s ease, transform .12s ease; color:var(--muted); text-decoration:none}
#article h1:hover .heading-anchor, #article h2:hover .heading-anchor, #article h3:hover .heading-anchor{opacity:1; transform:none}

/* Mark highlight for search */
mark{background:linear-gradient(90deg, rgba(125,211,252,0.16), rgba(96,165,250,0.12)); padding:2px 4px; border-radius:4px}

/* Responsive */
@media (max-width:900px){
  .sidebar{position:fixed; z-index:30; left:0; top:0; height:100vh; transform:translateX(0); background:linear-gradient(180deg, rgba(11,18,32,0.95), rgba(11,18,32,0.98));}
  .sidebar.collapsed{transform:translateX(-100%)}
  .content{padding:20px}
  .sidebar.collapsed + .content{padding-left:20px}
  .sidebar{transform:translateX(-8px); transition:transform .28s cubic-bezier(.2,.9,.2,1)}
  .sidebar:not(.collapsed){transform:translateX(0)}
  .topnav-inner{padding:0 8px}
  .nav-links{display:none}
}

/* Logo blob animation */
.logo-blob{display:inline-block; vertical-align:middle; width:12px; height:12px; margin-right:8px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #7dd3fc, #60a5fa); box-shadow:0 6px 18px rgba(96,165,250,0.12); animation:blob 3.6s infinite ease-in-out}
@keyframes blob{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-3px) scale(1.06)}100%{transform:translateY(0) scale(1)}}

/* subtle header shadow */
.content-inner{transition:box-shadow .36s ease, transform .36s ease}
.content-inner:hover{box-shadow:0 18px 60px rgba(2,6,23,0.7); transform:translateY(-2px)}

.error-panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:12px; color:var(--muted)}
